<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vinayaka Industries Catalog</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>
<body class="bg-gray-100 font-sans">
  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-16 bg-blue-900 flex flex-col items-center py-4">
      <img
        src="https://drive.google.com/uc?id=1L_NG4hUWi56GAaSTWBYFyau5cpG2Pb7W"
        alt="Logo"
        class="w-12 h-12 rounded-full border-2 border-white"
      />
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col">
      <!-- Topbar -->
      <header class="bg-white shadow px-4 py-3 flex items-center gap-4">
  <img src="https://drive.google.com/uc?id=1L_NG4hUWi56GAaSTWBYFyau5cpG2Pb7W" alt="Vinayaka Logo" class="w-10 h-10 object-contain" />
  <input
    type="text"
    placeholder="Search parts..."
    class="w-full max-w-xs border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring focus:border-blue-500"
  />
</header>


      <!-- Content -->
      <main class="p-4 space-y-6">
        <!-- Filters -->
        <div class="bg-white p-4 rounded shadow">
          <h2 class="text-lg font-semibold mb-4">Filter Parts</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">MODEL</label>
              <select id="modelFilter" class="w-full px-3 py-2 border border-gray-300 rounded">
                <option value="">All Models</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">MODEL NUMBER</label>
              <select id="modelNumberFilter" class="w-full px-3 py-2 border border-gray-300 rounded">
                <option value="">All Model Numbers</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">DEVICE</label>
              <select id="deviceFilter" class="w-full px-3 py-2 border border-gray-300 rounded">
                <option value="">All Devices</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Product Table -->
        <div class="bg-white rounded shadow overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-gray-100 text-left">
              <tr>
                <th class="px-4 py-2 font-semibold text-gray-700">MODEL</th>
                <th class="px-4 py-2 font-semibold text-gray-700">MODEL NUMBER</th>
                <th class="px-4 py-2 font-semibold text-gray-700">DEVICE</th>
                <th class="px-4 py-2 font-semibold text-gray-700">SIZE</th>
                <th class="px-4 py-2 font-semibold text-gray-700">ITEM NAME</th>
                <th class="px-4 py-2 font-semibold text-gray-700">PRICE</th>
              </tr>
            </thead>
            <tbody id="productTable" class="divide-y divide-gray-200"></tbody>
          </table>
        </div>
      </main>
    </div>
  </div>

  <!-- Modal -->
  <div id="productModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg max-w-lg w-full relative">
      <button onclick="closeModal()" class="absolute top-2 right-2 text-gray-500 text-xl">✕</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <script>
    const SHEET_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRFxJyIv-_4zkNDXwmv5dYgWE-LRybVLKayk8jmiUCdbuL1XX4Ac0DuU5ip1jZmo-GaDQwWUhJFw8Pt/pub?output=csv';
    let allProducts = [];

    function renderProductTable(products) {
      const tbody = document.getElementById('productTable');
      tbody.innerHTML = '';
      products.forEach((product, index) => {
        const row = document.createElement('tr');
        row.className = 'hover:bg-gray-50 cursor-pointer';
        row.innerHTML = `
          <td class="px-4 py-2">${product['MODEL']}</td>
          <td class="px-4 py-2">${product['MODEL NUMBER']}</td>
          <td class="px-4 py-2">${product['DEVICE']}</td>
          <td class="px-4 py-2">${product['SIZE']}</td>
          <td class="px-4 py-2 text-blue-600 underline" onclick="showDetails(${index})">${product['ITEM NAME']}</td>
          <td class="px-4 py-2">₹${product['PRICE']}</td>
        `;
        tbody.appendChild(row);
      });
    }

    function showDetails(index) {
      const product = allProducts[index];
      const modal = document.getElementById('productModal');
      const content = document.getElementById('modalContent');

      content.innerHTML = `
        <img src="${product['IMAGE LINK'] || ''}" class="w-full mb-4 rounded" alt="Product Image">
        <table class="min-w-full text-sm table-auto border">
          <tbody>
            ${[
              'ITEM NAME', 'MODEL', 'MODEL NUMBER', 'DEVICE', 'SIZE', 'PRICE', 'AVAILABILITY',
              'INNER DIAMETER', 'OUTER DIAMETER', 'LENGHT', 'OUTSIDE TEETH',
              'INSIDE TEETH', 'SIDE TEETH', 'OTHER', 'OTHERS'
            ].map(key => `
              <tr>
                <td class="font-semibold px-2 py-1 border">${key}</td>
                <td class="px-2 py-1 border">${product[key] || '-'}</td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      `;
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    function closeModal() {
      document.getElementById('productModal').classList.add('hidden');
      document.getElementById('productModal').classList.remove('flex');
    }

    function populateDropdowns(products) {
      const modelFilter = document.getElementById('modelFilter');
      const modelNumberFilter = document.getElementById('modelNumberFilter');
      const deviceFilter = document.getElementById('deviceFilter');

      const models = [...new Set(products.map(p => p['MODEL']).filter(Boolean))];
      const modelNumbers = [...new Set(products.map(p => p['MODEL NUMBER']).filter(Boolean))];
      const devices = [...new Set(products.map(p => p['DEVICE']).filter(Boolean))];

      models.forEach(value => modelFilter.innerHTML += `<option value="${value}">${value}</option>`);
      modelNumbers.forEach(value => modelNumberFilter.innerHTML += `<option value="${value}">${value}</option>`);
      devices.forEach(value => deviceFilter.innerHTML += `<option value="${value}">${value}</option>`);
    }

    function applyFilters() {
      const model = document.getElementById('modelFilter').value;
      const modelNumber = document.getElementById('modelNumberFilter').value;
      const device = document.getElementById('deviceFilter').value;

      let filtered = allProducts;
      if (model) filtered = filtered.filter(p => p['MODEL'] === model);
      if (modelNumber) filtered = filtered.filter(p => p['MODEL NUMBER'] === modelNumber);
      if (device) filtered = filtered.filter(p => p['DEVICE'] === device);

      renderProductTable(filtered);
    }

    document.getElementById('modelFilter').addEventListener('change', applyFilters);
    document.getElementById('modelNumberFilter').addEventListener('change', applyFilters);
    document.getElementById('deviceFilter').addEventListener('change', applyFilters);

    Papa.parse(SHEET_CSV_URL, {
      download: true,
      header: true,
      complete: function (results) {
        allProducts = results.data.filter(row => row['ITEM NAME']);
        populateDropdowns(allProducts);
        renderProductTable(allProducts);
      },
      error: function (error) {
        console.error('Error loading CSV:', error);
      }
    });
  </script>
</body>
</html>
